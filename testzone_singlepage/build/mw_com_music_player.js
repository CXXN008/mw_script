parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function m(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function d(i,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function p(i,t,a){return t&&d(i.prototype,t),a&&d(i,a),i}console.log("music player loaded ...");var q=document.querySelector("#mwcom-music-player"),u=document.querySelector("source").src,f={borderColor:"#8ebbc4",playedColor:"#ffffff",backgroundColor:"rgba(142,187,196,.3)",iconColor:"#ffffff",borderWidth:2,size:48,className:"circle-audio-player"},b=Math.PI,c=2*b,g=-b/2,j=200,k=1800,v=function(){function i(t){for(var a in m(this,i),t=t||{},f)this[a]=t[a]||f[a];this._canvas=document.createElement("canvas"),this._canvas.setAttribute("class",this.className+" is-loading"),this._canvas.addEventListener("mousedown",function(){this.playing?this.pause():this.play()}.bind(this)),this._ctx=this._canvas.getContext("2d"),this.setAudio(t.audio),this.setSize(this.size),function i(t){this.animating&&this._updateAnimations(t),(this._forceDraw||this.playing||this.animating||this.loading)&&(this._draw(),this._forceDraw=!1),requestAnimationFrame(i.bind(this))}.call(this,new Date().getTime())}return p(i,[{key:"_animateIcon",value:function(i,t){this._animationProps={animStart:null,from:t,to:i},t?this.animating=!0:(this._animationProps.current=this._icons[i].slice(),this.draw())}},{key:"_updateAnimations",value:function(i){this._animationProps.animStart=this._animationProps.animStart||i;var t=i-this._animationProps.animStart,a=1-Math.cos(t/j*b/2);if(t>=j)this.animating=!1,a=1,this._animationProps.current=this._icons[this._animationProps.to].slice(),this.draw();else{for(var s=this._icons[this._animationProps.from],e=[],h=0;h<s.length;h++){e.push([]);for(var n=0;n<s[h].length;n++){e[h].push([]);var r=this._icons[this._animationProps.to][h][n];e[h][n][0]=s[h][n][0]+(r[0]-s[h][n][0])*a,e[h][n][1]=s[h][n][1]+(r[1]-s[h][n][1])*a}}this._animationProps.current=e}}},{key:"_draw",value:function(i){if(isNaN(i)&&(i=this.audio.currentTime/this.audio.duration||0),this._ctx.clearRect(0,0,this.size,this.size),this._ctx.beginPath(),this._ctx.arc(this._halfSize,this._halfSize,this._halfSize-this.borderWidth/2,0,c),this._ctx.closePath(),this._ctx.fillStyle=this.backgroundColor,this._ctx.fill(),this._ctx.lineWidth=this.borderWidth,this._ctx.strokeStyle=this.borderColor,this._ctx.stroke(),i>0&&(this._ctx.beginPath(),this._ctx.arc(this._halfSize,this._halfSize,this._halfSize-this.borderWidth/2,g,g+c*i),this._ctx.strokeStyle=this.playedColor,this._ctx.stroke()),this._ctx.fillStyle=this.iconColor,this.loading){var t=-Math.cos(new Date().getTime()%k/k*b)*c-b/3-b/2;this._ctx.beginPath(),this._ctx.arc(this._halfSize,this._halfSize,this._halfSize/3,t,t+b/3*2),this._ctx.strokeStyle=this.iconColor,this._ctx.stroke()}else{this._ctx.beginPath();for(var a=this._animationProps&&this._animationProps.current||this._icons.play,s=0;s<a.length;s++){this._ctx.moveTo(a[s][0][0],a[s][0][1]);for(var e=1;e<a[s].length;e++)this._ctx.lineTo(a[s][e][0],a[s][e][1])}this._ctx.fill(),this._ctx.strokeStyle=this.iconColor,this._ctx.lineWidth=2,this._ctx.lineJoin="miter",this._ctx.stroke()}}},{key:"_setState",value:function(i){this.playing=!1,this.loading=!1,"playing"===i?(this.playing=!0,this._animateIcon("pause","play")):"loading"===i?this.loading=!0:"loading"!==this.state?this._animateIcon("play","pause"):this._animateIcon("play",null),this.state=i,this._canvas.setAttribute("class",this.className+" is-"+i),this.draw()}},{key:"draw",value:function(){this._forceDraw=!0}},{key:"setSize",value:function(i){this.size=i,this._halfSize=i/2,this._canvas.width=i,this._canvas.height=i;var t=this.size/2,a=t/10,s=Math.cos(b/3*2)*(t/2)+this._halfSize,e=t/2+this._halfSize,h=(e-s)/2+s,n=this._halfSize-Math.sin(b/3*2)*(t/2),r=this.size-n,o=this._halfSize-t/3,l=this.size-o;this._icons={play:[[[s,n],[h,(this._halfSize-n)/2+n],[h,(this._halfSize-n)/2+this._halfSize],[s,r]],[[h,(this._halfSize-n)/2+n],[e,this._halfSize],[e,this._halfSize],[h,(this._halfSize-n)/2+this._halfSize]]],pause:[[[o,n+a],[this._halfSize-a,n+a],[this._halfSize-a,r-a],[o,r-a]],[[this._halfSize+a,n+a],[l,n+a],[l,r-a],[this._halfSize+a,r-a]]]},this._animationProps&&this._animationProps.current&&this._animateIcon(this._animationProps.to),this.playing||this.draw()}},{key:"setAudio",value:function(i){this.audio=new Audio(i),this._setState("loading"),this.audio.addEventListener("canplaythrough",function(){this._setState("paused")}.bind(this)),this.audio.addEventListener("play",function(){this._setState("playing")}.bind(this)),this.audio.addEventListener("pause",function(){this.audio.currentTime===this.audio.duration&&(this.audio.currentTime=0),this._setState("paused")}.bind(this))}},{key:"appendTo",value:function(i){i.appendChild(this._canvas)}},{key:"play",value:function(){this.audio.play()}},{key:"pause",value:function(){this.audio.pause()}}]),i}(),w=new v({audio:u,size:120,borderWidth:8});w.appendTo(q);return{"JPd9":{}};});